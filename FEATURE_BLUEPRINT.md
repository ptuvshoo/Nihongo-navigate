
# Prompt: Recreate the "Nihongo Challenge" Application

This document provides a detailed prompt to build a web application called "Nihongo Challenge". The primary goal of this app is to help users study for the Japanese Language Proficiency Test (JLPT) by providing AI-generated mock exams.

## 1. Core Objective

Build a clean, modern, and focused web application that allows users to select a JLPT level, take a mock exam generated by an AI, and receive an AI-powered analysis of their results.

## 2. Technology Stack

You must use the following technologies:

-   **Framework**: Next.js (using the App Router)
-   **Language**: TypeScript
-   **Styling**: Tailwind CSS
-   **UI Components**: shadcn/ui (pre-installed in the `src/components/ui` directory)
-   **AI Backend**: Genkit, specifically with `@genkit-ai/googleai` for interfacing with Gemini models.
-   **Icons**: `lucide-react`

## 3. Style and Design Guidelines

-   **Layout**: The application should be centered, clean, and minimalist. Use `Card` components from shadcn/ui to structure the main content areas. The design must be fully responsive.
-   **Quiz Interface**: The quiz should be presented in a "test paper" format, where all questions are listed vertically on a single, scrollable page to mimic a real exam sheet.
-   **Fonts**:
    -   **Headlines**: Use 'Poppins', a bold and modern sans-serif font.
    -   **Body Text**: Use 'Noto Sans JP', a highly readable font for both English and Japanese characters.
-   **Color Scheme**:
    -   **Background**: A light, neutral gray (`hsl(220 13% 95%)`) to create a calm and focused environment.
    -   **Primary**: A strong, accessible indigo/blue (`hsl(231 48% 48%)`) for interactive elements like buttons.
    -   **Accent**: A vibrant orange (`hsl(14 100% 57%)`) for highlighting scores or important feedback.

## 4. Feature Implementation Details

### a. Homepage (`/src/app/page.tsx`)

-   **Purpose**: The entry point where users select their desired JLPT level.
-   **Layout**: A single, centered `Card`.
-   **Content**:
    -   An icon (`BookOpenCheck` from `lucide-react`).
    -   A main title: "Nihongo Challenge".
    -   A short description: "Test your Japanese knowledge with AI-generated JLPT questions."
    -   A list of five large buttons, one for each JLPT level: "N1", "N2", "N3", "N4", and "N5".
-   **Functionality**: Clicking a level button navigates the user to the test page, passing the chosen level as a URL query parameter (e.g., `/test?level=N5`).

### b. AI Flow 1: Generate Test Questions (`/src/ai/flows/generate-test-questions.ts`)

-   **Purpose**: To dynamically create a set of JLPT questions.
-   **Framework**: Use Genkit. Define a flow named `generateTestQuestionsFlow`.
-   **Input Schema (`GenerateTestQuestionsInput`)**: An object containing:
    -   `level`: A Zod enum of `['N1', 'N2', 'N3', 'N4', 'N5']`.
    -   `numberOfQuestions`: A `z.number()`, defaulting to 10.
-   **Output Schema (`GenerateTestQuestionsOutput`)**: An object containing a `questions` array. Each item in the array is an object with:
    -   `question`: The Japanese question text (`z.string()`).
    -   `options`: An array of four strings (`z.array(z.string())`).
    -   `correctAnswer`: The correct answer string (`z.string()`).
    -   `category`: A Zod enum of `['Vocabulary', 'Grammar', 'Kanji']`.
-   **Prompt**: Instruct the AI to act as a JLPT expert, generating the specified number of multiple-choice questions for the given level, ensuring each question has four options and is correctly categorized.

### c. AI Flow 2: Analyze Test Results (`/src/ai/flows/analyze-test-results.ts`)

-   **Purpose**: To provide personalized feedback on the user's performance.
-   **Framework**: Use Genkit. Define a flow named `analyzeTestResultsFlow`.
-   **Input Schema (`AnalyzeTestResultsInput`)**: An object containing:
    -   `level`: The JLPT level string.
    -   `results`: An array of objects, where each object represents a user's answer and has `question`, `category`, `userAnswer`, `correctAnswer`, and `isCorrect` fields.
-   **Output Schema (`AnalyzeTestResultsOutput`)**: An object with:
    -   `feedback`: A brief, encouraging summary of the user's performance (`z.string()`).
    -   `weakAreas`: An array of strings listing the top 2-3 categories where the user struggled the most (`z.array(z.string())`). This array should be empty if the score is perfect.
-   **Prompt**: Instruct the AI to act as a language teacher, analyze the provided test results, identify weak areas based on incorrect answer categories, and provide supportive feedback.

### d. Server Actions (`/src/app/actions.ts`)

-   **Purpose**: To create a type-safe bridge between the frontend components and the backend Genkit flows.
-   **`getTestQuestions(level: string)`**: A server action that validates the input `level`, calls the `generateTestQuestions` flow, handles potential errors, and returns the questions or an error message.
-   **`getTestAnalysis(input: AnalyzeTestResultsInput)`**: A server action that calls the `analyzeTestResults` flow and returns the analysis or an error message.

### e. Test Page (`/src/app/test/page.tsx`)

-   **Purpose**: To display and manage the quiz experience.
-   **Functionality**:
    1.  Read the `level` from the URL search parameters.
    2.  Use a `useEffect` hook to call the `getTestQuestions` server action.
    3.  Display a loading state (`Loader2` icon) while questions are being generated.
    4.  Display an error state (`AlertTriangle` icon) if the action fails.
    5.  Once questions are loaded, pass them to the `Quiz` component.

### f. Quiz Component (`/src/components/quiz.tsx`)

-   **Purpose**: To render the interactive test.
-   **Layout**: A single, large `Card` that resembles a test paper.
-   **Functionality**:
    1.  Map over the `questions` array and display each question with its number.
    2.  For each question, display its four answer options as clickable buttons.
    3.  Manage the user's selected answers in a state object.
    4.  At the bottom, include a "Finish & See Results" button. This button must be disabled until all questions have been answered.
    5.  When clicked, it should switch the view to the `ScoreSummary` component, passing the questions and user answers as props.

### g. Score Summary Component (`/src/components/score-summary.tsx`)

-   **Purpose**: To display the final score and AI-powered feedback.
-   **Functionality**:
    1.  Calculate the user's score (e.g., "8 / 10") and percentage.
    2.  Display the score prominently with an `Award` icon.
    3.  Use a `useEffect` hook to call the `getTestAnalysis` server action with the user's results.
    4.  Show a loading state (`Loader2` icon) while the analysis is being fetched.
    5.  Display the `feedback` and `weakAreas` from the AI inside a nested `Card`.
    6.  Provide two buttons: "Try Again" (reloads the page to start a new test of the same level) and "Choose Another Level" (links to the homepage).

This prompt provides all the necessary details to reconstruct the "Nihongo Challenge" application as a feature within another project.
